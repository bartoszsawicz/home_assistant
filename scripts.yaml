store_blinds_state:
  alias: Save blinds current position so it can be used when they're reopened
  sequence:
    - service: input_number.set_value
      data_template:
        entity_id: input_number.kitchen_blinds_saved_position
        value: "{{ state_attr('cover.level','current_position') | int }}"
    - service: input_number.set_value
      data_template:
        entity_id: input_number.kids_bedroom_blinds_saved_position
        value: "{{ state_attr('cover.level_2','current_position') | int }}"
set_default_blinds_position:
  alias: Sets default value as saved blinds position
  sequence:
    - service: input_number.set_value
      data_template:
        entity_id: input_number.kitchen_blinds_saved_position
        value: "{{ states('input_number.kitchen_blinds_default_position') | int }}"
    - service: input_number.set_value
      data_template:
        entity_id: input_number.kids_bedroom_blinds_saved_position
        value: "{{ states('input_number.kids_bedroom_blinds_default_position') | int }}"
set_morning_blinds_position:
  alias: Sets default value as saved blinds position
  sequence:
    - service: input_number.set_value
      data_template:
        entity_id: input_number.kitchen_blinds_saved_position
        value: "{{ states('input_number.kitchen_blinds_morning_position') | int }}"
    - service: input_number.set_value
      data_template:
        entity_id: input_number.kids_bedroom_blinds_saved_position
        value: "{{ states('input_number.kids_bedroom_blinds_morning_position') | int }}"
open_blinds:
  alias: Open all blinds
  sequence:
    - service: cover.set_cover_position
      data_template:
        entity_id: cover.level
        position: "{{ states('input_number.kitchen_blinds_saved_position') | int }}"
    - service: cover.set_cover_position
      data_template:
        entity_id: cover.level_2
        position: "{{ states('input_number.kids_bedroom_blinds_saved_position') | int }}"
close_blinds:
  alias: Close all blinds
  sequence:
    - service: cover.close_cover
      data:
        entity_id: cover.level
    - service: cover.close_cover
      data:
        entity_id: cover.level_2
close_blinds_if_windows_closed:
  alias: Close all blinds if windows are closed. Asks users otherwise
  sequence:
    - event: close_blinds_request
      event_data:
        blinds_entity_id: cover.level
        window_entity_id: binary_sensor.living_room_sensor_node_2_3
    - event: close_blinds_request
      event_data:
        blinds_entity_id: cover.level_2
        window_entity_id: binary_sensor.bedroom_2_sensor_node_3_2
    
tv_onoff:
  alias: TV on/off
  sequence:
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          - "JgAwApKUEjcTNxM3FBETFA8UEhQSEhI4ETkTNxMSExITEhITExITEhM3ExITEhITFBETExEUEzYTEhI4EzgSNxQ2EDkTNxMABfKTkhM3EjgSNxITExMTEhMSExISOBI3EzcUERITEhQSExAVERUSNxITEhUQExMSExISFBI3ExITNxM3EjcSOBM3EjgTAAXxk5MUNhM3EzYSExIUERMSFBEUETgTNxM3ExIQFRITEhMRFRAVEzYSExMSExMTEhMSExISOBMSETkSNxI4EzcTNxI3EgAF9JSSEzcTNhQ2ExISExQRExMTEhM2FDYTNxITExISExQRFBETExM2EhMUEhMSERQTEhMSEzcSExM3EzYTNxM3EjgSNxQABfGTkxI3EjgSOBQREhMSExITEhMTNxI4EjgSExITFBESExQREhMSOBITEhMSExMTEhMSExI3ExMSNxI4EjgSOBI3EzcSAAXzk5ITNxI4EjgSExITEhMSExITEjgSOBI4EhMSExITExISExITFDYSExITEhMUERMSEhMTNxITEjgSOBI4EjcTNxM3EwAF8pSREzcTNxM2EhQTEhITExITEhI4EzYUNhQREhMUEhMSExITEhM3EhMSExMSEhMSExMSEzcTEhI4EjgSNxM3EjgSOBQABfKTkhI4EjgSNxMTEhMSExITEhMSOBI3EzcSExQRExMSExITEhMSOBITEhMSExITEhMSExI4EhMSOBI4EjcTNxI4EjgSAA0FEhMUERMTExI="
tv_volume_up:
  alias: TV volume up
  sequence:
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          - "JgC8ApKTEjgSOBI3EhMTExITFBESExI4EjcTNxITEhMSExMSExMSNxM3EjgSExITEhMSExMSExMUERITEjcTNxI4EjgSOBIABfKTkxM2EzcSOBITEhMSExMSExMSNxM3EjgSExITEhMSExITEzcSOBI4EhMSExITEhMSExITEhMTEhM3EjgSOBI4EjcSAAXzk5ITNxI4EjgSExITEhMSExITEjgSOBI4EhMSExITEhMSExI4EjgSNxMTEhMSExITEhMSExITFRASOBI4EjgSNxM3EgAF9JOTEjcTNxI4EhMSExITEhMSExM3EjgSOBITEhMSExITEhMSOBI4EjgSExITEhMSExITEhMSExITEzcSOBI4EjcTNxIABfOTkhM3EjgSOBITEhMSExITEhMSOBI4EjgSExITEhMSExITEjgSOBI3ExITExITEhMSExITEhMSExI4EjgTNhM3EjgSAAXzk5ISOBI4EjgSExITEhMSExITEjgSOBI3ExITExITEhMSExI4EjcTNxITEhMTEhMTEhMSExITEhMSOBI4EjcSOBI4EgAF85OSEjgSOBI3ExITExITEhMSExI4EjcTNxITEhMTExITEhMSNxM3EjgSExITEhMSExMTEhMSExITEjgSNxM3FDYSOBIABfSTkhI4EjgSOBMSEhMSExITEhMSOBI4EjcTEhMTEhMSExITEjgSNxI4EhMSExMSExMSExITEhMSExI4EjcTNxI4EjgSAAXzkpMSOBI4EjcSExMTEhMSExITEjgSNxM3EhMSExITExMSExI3FDYSOBQREhMSExITExITExITEhMSOBI3EjgSOBM2EwAF8pOTEjgSNxM3EhMSExMSExMSExI3EzcSOBITEhMSExITEhMTNxI4EjgSExITEhMSExITEhMTEhMTEjcTNxI4EjgSNxMADQUSExITEhMSExI4Ejg="
tv_volume_down:
  alias: TV volume down
  sequence:
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          - "JgB2ApOSEzcSOBI4EhMSExITFBESExQ2EjgSOBITEhMSExITEhMSOBI4EhMSNxMTEhMSExITEhMSExI4EhMSOBI3EzcSOBIABfOTkhI4EjgSOBITEhMSExITEhMSOBI4EjcTEhMTEhMSExITEjgSNxMTEjcSExMSExMSExITEhMSOBITEjcTNxI4EjgSAAXzkpMSOBI4EjcSExMTEhMSExITEjgSNxM3EhMSExMSExMSExI3EzcSExI4EhMSExITExITExITEjcTExI3EjgSOBI4EgAF9JKTEjgSOBI3FhASExITEhMUERI4EjcTNxITEhMTExITEhMSOBI3EhMTNxITEhMTEhMTEhMSExI4EhMSNxM3EjgSOBIABfKTkxI4EjcTNxITEhMTExITEhMSNxM3EjgSExITEhMTEhMTEjcTNxITEjgSExITEhMSExMSExMSNxMSEzcSOBI4EjgSAAXyk5MSNxM3EjgSExITEhMTEhMTEjcSOBI4EhMSExITEhMSExM3EjgVEBI4EhMSExITEhMSExITEzcSExI4EjgSOBI3EgAF85OTEjcSOBI4EhMSExITEhMSExM3EjgSOBITEhMSExITEhMSOBI4EhMSOBITEhMSExITEhMSExI4EhMSOBI4EjcTNxIABfSTkxI3EzcSOBITEhMSExITExITNxI4EjgSExITEhMSExITEjgSOBITEjgSExITEhMSExITEhMSOBITEjgSOBI3EzcSAAXzk5ITNxQ2EjgSExITEhMSExITEjgSOBI4EhMSExQPFBMSExI4EjgUERI3ExMUERITEhMSExITEjgSExI4EjcVNRI4EgANBRIT"
tv_off:
  alias: TV off
  sequence:
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          # 1
          - "JgDSAJKTEjgSOBI3EhMTExITEhMSExI4EjcTNxITEhMSExMTFBESNxM3EhMSExMSExMSNxITExMSExU0EzcSOBI4EhMSOBIABfCTkxI3FDYTNxMSEhMTEhMSEhMVNRI4EjgTEhIUEhMSEhITEjgSOBITFBESExMSEzcSExITEhMSOBI4EjcTNxITEzcSAAXxk5ISOBI4FDUUEhMSEhMSExMSEjgTNxM2ExITEhIUEhMUERM3EjcTEhMTERUQFBM2FBITEhMSEjgSNxQ3EjcRFBI4EwANBQAAAAAAAA=="
    - delay: 00:00:10
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          - "JgAwApKUEjcTNxM3FBETFA8UEhQSEhI4ETkTNxMSExITEhITExITEhM3ExITEhITFBETExEUEzYTEhI4EzgSNxQ2EDkTNxMABfKTkhM3EjgSNxITExMTEhMSExISOBI3EzcUERITEhQSExAVERUSNxITEhUQExMSExISFBI3ExITNxM3EjcSOBM3EjgTAAXxk5MUNhM3EzYSExIUERMSFBEUETgTNxM3ExIQFRITEhMRFRAVEzYSExMSExMTEhMSExISOBMSETkSNxI4EzcTNxI3EgAF9JSSEzcTNhQ2ExISExQRExMTEhM2FDYTNxITExISExQRFBETExM2EhMUEhMSERQTEhMSEzcSExM3EzYTNxM3EjgSNxQABfGTkxI3EjgSOBQREhMSExITEhMTNxI4EjgSExITFBESExQREhMSOBITEhMSExMTEhMSExI3ExMSNxI4EjgSOBI3EzcSAAXzk5ITNxI4EjgSExITEhMSExITEjgSOBI4EhMSExITExISExITFDYSExITEhMUERMSEhMTNxITEjgSOBI4EjcTNxM3EwAF8pSREzcTNxM2EhQTEhITExITEhI4EzYUNhQREhMUEhMSExITEhM3EhMSExMSEhMSExMSEzcTEhI4EjgSNxM3EjgSOBQABfKTkhI4EjgSNxMTEhMSExITEhMSOBI3EzcSExQRExMSExITEhMSOBITEhMSExITEhMSExI4EhMSOBI4EjcTNxI4EjgSAA0FEhMUERMTExI="
tv_pc_source:
  alias: PC source
  sequence:
    - service: switch.broadlink_send_packet_192_168_0_110      
      data:
        packet:
          # 1
          - "JgDSAJKTEjgSOBI3EhMTExITEhMSExI4EjcTNxITEhMSExMTFBESNxM3EhMSExMSExMSNxITExMSExU0EzcSOBI4EhMSOBIABfCTkxI3FDYTNxMSEhMTEhMSEhMVNRI4EjgTEhIUEhMSEhITEjgSOBITFBESExMSEzcSExITEhMSOBI4EjcTNxITEzcSAAXxk5ISOBI4FDUUEhMSEhMSExMSEjgTNxM2ExITEhIUEhMUERM3EjcTEhMTERUQFBM2FBITEhMSEjgSNxQ3EjcRFBI4EwANBQAAAAAAAA=="
    - delay: 00:00:10
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          # Menu
          - "JgDSAJWSEjgSOBI3ExMSExMSEhMSExQ2FDUTNxITExITExITEhMSExI4EhMSNxM3EhMUEhITEjcSExM3EhMSExM3EjgSOBIABfKTkxI4EjcTNxITEhMUERUREhMUNRM3EjgSExITEhMSExMSFRESNxMSEzcSOBITEhMSExI4EhMUNhITEhMSOBI4EjcTAAXyk5MSNxM3EjgSExITEhMSExITEzcSOBI4EhMSExITEhMSExIUETgSExI4EjgSFBETEhMSOBITEjgSExQREjgSNxM3EgANBQAAAAAAAA=="
    - delay: 00:00:01
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          # Up
          - "JgDSAJKTFDYSOBI3EhMTExITEhMSExI4EjcTNxITEhMSExMTEhMSExITEhMSExITEjgSOBITEjcTNxI4EjgSOBITEhMSOBIABfKTkxQ1EzcSOBIUERMSExITExMSNxI4EjgSExITEhMSExITExITEhMTEhMSExI4EzYSExM3EjgSOBQ2EjcSExMSEzcSAAXzk5ITNxI4EjgSExITEhMSExITEjgSOBI4EhMSExITEhMSExITExISExMSExMSNxM3EhMSOBI4EjcTNxI4EhMSExI4FAANBQAAAAAAAA=="
    - delay: 00:00:01
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          # Enter
          - "JgDSAJOTEjcTNxI4EhMSExITEhMTEhM3FTUSOBITEhMSExITEhMSExQRExMSNxITEzcSOBITEjgSOBI3EhMTNxITEhMTNxIABfOTkhI4EjgSOBITEhMSExITEhMSOBI4EjcTExITEhMSExITEhMSExITEjgSExI4EjgSExI4EjcSOBITEjgSExITEjgSAAXzkpMSOBI4EjcTEhMTEhMSExITEjgSNxM3EhMSExMSExMSExITEhMSExI4EhMSOBI3ExMSNxI4EjgUERI4EhMSExI4EgANBQAAAAAAAA=="
    - delay: 00:00:01
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          # Enter
          - "JgDSAJOTEjcTNxI4EhMSExITEhMTEhM3FTUSOBITEhMSExITEhMSExQRExMSNxITEzcSOBITEjgSOBI3EhMTNxITEhMTNxIABfOTkhI4EjgSOBITEhMSExITEhMSOBI4EjcTExITEhMSExITEhMSExITEjgSExI4EjgSExI4EjcSOBITEjgSExITEjgSAAXzkpMSOBI4EjcTEhMTEhMSExITEjgSNxM3EhMSExMSExMSExITEhMSExI4EhMSOBI3ExMSNxI4EjgUERI4EhMSExI4EgANBQAAAAAAAA=="
    - delay: 00:00:01
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          # Up
          - "JgDSAJKTFDYSOBI3EhMTExITEhMSExI4EjcTNxITEhMSExMTEhMSExITEhMSExITEjgSOBITEjcTNxI4EjgSOBITEhMSOBIABfKTkxQ1EzcSOBIUERMSExITExMSNxI4EjgSExITEhMSExITExITEhMTEhMSExI4EzYSExM3EjgSOBQ2EjcSExMSEzcSAAXzk5ITNxI4EjgSExITEhMSExITEjgSOBI4EhMSExITEhMSExITExISExMSExMSNxM3EhMSOBI4EjcTNxI4EhMSExI4FAANBQAAAAAAAA=="
    - delay: 00:00:01
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          # Up
          - "JgDSAJKTFDYSOBI3EhMTExITEhMSExI4EjcTNxITEhMSExMTEhMSExITEhMSExITEjgSOBITEjcTNxI4EjgSOBITEhMSOBIABfKTkxQ1EzcSOBIUERMSExITExMSNxI4EjgSExITEhMSExITExITEhMTEhMSExI4EzYSExM3EjgSOBQ2EjcSExMSEzcSAAXzk5ITNxI4EjgSExITEhMSExITEjgSOBI4EhMSExITEhMSExITExISExMSExMSNxM3EhMSOBI4EjcTNxI4EhMSExI4FAANBQAAAAAAAA=="
    - delay: 00:00:01
    - service: switch.broadlink_send_packet_192_168_0_110
      data:
        packet:
          # Enter
          - "JgDSAJOTEjcTNxI4EhMSExITEhMTEhM3FTUSOBITEhMSExITEhMSExQRExMSNxITEzcSOBITEjgSOBI3EhMTNxITEhMTNxIABfOTkhI4EjgSOBITEhMSExITEhMSOBI4EjcTExITEhMSExITEhMSExITEjgSExI4EjgSExI4EjcSOBITEjgSExITEjgSAAXzkpMSOBI4EjcTEhMTEhMSExITEjgSNxM3EhMSExMSExMSExITEhMSExI4EhMSOBI3ExMSNxI4EjgUERI4EhMSExI4EgANBQAAAAAAAA=="   
turn_on_terrace_lights:
  alias: Turn on terrace lights
  sequence:
    - service: switch.turn_on
      data:
        entity_id: switch.gateway_0_7
    - delay: 00:00:02
    - service: switch.turn_on
      data:
        entity_id: switch.gateway_0_7
    - delay: 00:00:02
    - service: switch.turn_on
      data:
        entity_id: switch.gateway_0_8
    - delay: 00:00:02
    - service: switch.turn_on
      data:
        entity_id: switch.gateway_0_8
    - delay: 00:00:02
turn_off_terrace_lights:
  alias: Turn off terrace lights
  sequence:
    - service: switch.turn_off
      data:
        entity_id: switch.gateway_0_7
    - delay: 00:00:02
    - service: switch.turn_off
      data:
        entity_id: switch.gateway_0_7
    - delay: 00:00:02
    - service: switch.turn_off
      data:
        entity_id: switch.gateway_0_7
    - delay: 00:00:02
    - service: switch.turn_off
      data:
        entity_id: switch.gateway_0_8
    - delay: 00:00:02
    - service: switch.turn_off
      data:
        entity_id: switch.gateway_0_8
    - delay: 00:00:02
    - service: switch.turn_off
      data:
        entity_id: switch.gateway_0_8
    - delay: 00:00:02
